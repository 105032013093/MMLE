<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace必须指向Dao接口 -->
<mapper namespace="com.mmle.dao.ICustomerDao">

	<!-- 注册客户 -->
	<insert id="insertCustomer" parameterType="com.mmle.entity.Customer" >
		insert into table_customer(telephone,password,sex, salt,e_mail,birthday,QQ,default_address_id,image_url,level,locked,
		locked_time,remark) values(#{telephone},#{password},#{sex},#{salt},#{eMail},#{birthday},#{QQ},#{defaultAddressId},
		#{imageUrl},0,0,#{lockedTime},#{remark}) 
	</insert>
	
	<!-- 删除客户个人信息 -->
	<delete id="deleteCustomerByTelephone" parameterType="java.lang.String">
	       delete from table_customer where telephone=#{telephone}
	</delete>
	
	<!-- 修改客户个人信息 -->
	<update id="updateCustomer" parameterType="com.mmle.entity.Customer">
	       update table_customer 
	       <set>
	       <if test="password!=null">
	           password=#{password},
	       </if>
	       <if test="sex!=null">
	          sex=#{sex},
	       </if>
	       <if test="salt!=null">
	          salt=#{salt},
	       </if>
	       <if test="eMail!=null">
	           e_mail=#{eMail},
	       </if>
	       <if test="birthday!=null">
	           birthday=#{birthday},
	       </if>
	       <if test="QQ!=null">
	           QQ=#{QQ},
	       </if>
	       <if test="defaultAddressId!=null">
	          default_address_id=#{defaultAddressId},
	       </if>
	       <if test="imageUrl!=null">
	          image_url=#{imageUrl},
	       </if>
	       <if test="level!=null">
	          level=#{level},
	       </if>
	       <if test="locked!=null">
	          locked=#{locked},
	       </if>
	       <if test="lockedTime!=null">
	          locked_time= #{lockedTime},
	       </if>
	       <if test="remark!=null">
	          remark=#{remark},
	       </if>
	       </set>
	          where telephone=#{telephone}
	</update>
	
    <!--查询出未被锁定锁定的客户信息  -->
    <select id="selectCustomerByTelephone" parameterType="java.lang.String" resultType="com.mmle.entity.Customer" >
		select * from table_customer where telephone=#{telephone}
	</select>
	
	<select id="selectCustomerByLevel" parameterType="java.lang.Short" resultType="java.lang.String">
	  select telephone from table_customer where level>=#{level}
	
	</select>
	



</mapper> 
